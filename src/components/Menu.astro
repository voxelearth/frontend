---
import { getCollection } from "astro:content";
import { siteLang, siteCurrency } from "~/data/config";
const repos = await getCollection("repos");
const siteLangFormat = siteLang.replace("_", "-");
---

<!-- Quick Nav -->
<div class="mb-20 sticky top-8 z-10">
	<nav class="bg-brand-green text-zinc-300/90 rounded-full max-w-5xl mx-auto swiper-repos w-full max-w-fit">
		<ul id="repo-nav" class="px-6 py-3 swiper-wrapper h-auto w-auto">
			{
				repos.map((repo) => (
					<li class="swiper-slide !w-max ml-8">
						<a href={`#${repo.data.slug}`} class="font-medium select-none hover:text-white focus:text-white">
							{repo.data.prettyName}
						</a>
					</li>
				))
			}
		</ul>
	</nav>
</div>

<div class="grid grid-cols-1 gap-y-32">
	{
		repos.map((repo) => (
			<div id={repo.data.slug} class="space-y-16 scroll-mt-20">
				<div class="flex flex-col items-center gap-2 max-w-lg mx-auto text-balance text-center">
					<h3 class="h4 text-brand-green/70">{repo.data.prettyName}</h3>
					<p>{repo.data.description}</p>
				</div>

				<dl class="max-w-5xl mx-auto">
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-x-16 xl:gap-x-32">
						{repo.data.repos.map((item) => (
							<div>
								<dt>
									<div class="flex justify-between items-center">
										<span class="font-bold text-2xl tracking-wide">{item.name}</span>
										<span class="flex items-center font-medium text-lg">
											{/* {new Intl.NumberFormat(siteLangFormat, {
												style: "currency",
												currency: siteCurrency,
											}).format(item.starCount)} */}
											<svg width="16" height="16" viewBox="0 0 24 24" class="mb-1 mr-1" fill="black" style="image-rendering: pixelated;" xmlns="http://www.w3.org/2000/svg">
												<polygon points="12,2 15,10 23,10 17,14 19,22 12,18 5,22 7,14 1,10 9,10"/>
											</svg>
											{new Intl.NumberFormat(siteLangFormat).format(item.starCount)}
										</span>
									</div>
								</dt>
								<dd>
									<p class="mt-2 text-gray-500 tracking-wide leading-normal text-balance">
										{item.description}
									</p>
								</dd>
							</div>
						))}
					</div>
				</dl>
			</div>
		))
	}
</div>